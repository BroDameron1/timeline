<% layout('layouts/boilerplate.ejs') %>

<div class="disableDiv">
    <div class="warning-popup">
        Confirm you want to delete this record by typing DELETE and clicking "Delete".
        <form action="" id="delete-confirmation">
            <div class="form-field"><input type="text" id="delete-validate"></div>
        <div class="popup-btn-container">
            <button class="button-delete">Delete</button>
        </form>
        <a href="#" class="button-edit">Cancel</a>
    </div>
    <div class="failed-match"></div>
    </div>
</div>

<h1>Source Data</h1>
    <div>Title: <%= publicSourceData.title %></div>
    <div>Type: <%= publicSourceData.mediaType %></div>
    <div>Most Recent Contributors: <%= publicSourceData.author[0].username %></div>
    <div><img src="<%= publicSourceData.images.url %>"> </div>
<% if (currentUser) { %>
    <% if (!publicSourceData.checkedOut) { %> 
        <div><a href="/sources/<%= publicSourceData.slug %>/edit" class="button-edit">Edit</a></div>
    <% } else { %> 
        <div><a href="#" class="button-locked">Locked</a></div>
    <% } %> 
<% } %> 
<% if (currentUser && currentUser.role === 'admin') { %>
    <div>
        <form action="/sources/<%= publicSourceData.slug %>?_method=DELETE" method="POST" class="delete-record">
            <button class="btn-delete">Delete Record</button>
        </form>
    </div>
<% } %> 

<!-- using the same scripts as dashboard since it's only the delete confirmation script -->
<script type="module" src="/js/dashboard.js"></script>